import { Callout } from 'nextra/components'

# Changing Configuration via Environment Variables

Configuration options listed in the [configuration parameters table](/configuration) are typically set via the `pelican.yaml` file.
If, however, there is a corresponding environment variable set in the shell where the command is executed,
that will override the configuration provided in the `pelican.yaml` file.

<Callout type="warning">
  Using environment variables to change the configuration means the state of the Pelican component
  is not easily reproducible, especially if inheriting the environment from multiple parents.
  Furthermore, the changes will be lost upon restart of the host machine/container.
  While this approach is useful for testing changes to the configuration,
  any "permanent" changes should be set via the appropriate `pelican.yaml` file.
</Callout>

## Syntax

The environment variable name is constructed from the one-line address of the configuration parameter,
e.g., `Level1.Level2`, as follows:

1. Capitalize all letters.
2. Replace the period `.` with an underscore `_`.
3. Prefix with `PELICAN_`

This leads to an environment variable name of the form `PELICAN_LEVEL1_LEVEL2`.

## Examples

To demonstrate the syntax for setting the environment variable,
consider the following examples.

To set the logging level for a Pelican component to "Debug" in the `pelican.yaml` file,
you would use the following:

```yaml
# /etc/pelican/pelican.yaml
Logging:
  Level: Debug
```

To set the logging level for a Pelican component to "Debug" via an environment variable,
you would use

```bash
export PELICAN_LOGGING_LEVEL=Debug
```

Note that the environment variable is prefixed by `PELICAN_` and
that the nested keys are capitalized and separated by underscores (`_`).

If the value of the configuration option is a list,
the corresponding value for the environment variable should be comma-separated.

For example, the `Client.PreferredCaches` configuration takes a list of values
that it should try (where the `+` value says to fallback to the Director).
This configuration in the `pelican.yaml` file looks like this:

```yaml
Client:
  PreferredCaches: ["cache1", "cache2", "+"]
```

The corresponding environment variable to set this same value would be

```bash
export PELICAN_CLIENT_PREFERREDCACHES=cache1,cache2,+
```
