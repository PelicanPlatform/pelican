digraph {

  node [shape=rectangle, penwidth=2];

  // Declare this node here so that it floats to a reasonable location
  // in the layout.

  pelican_software_base;

  // Give the subgraphs non-descriptive names because the names influence
  // where in the layout the subgraphs go. With a little care (read as: lots
  // of trial and error), we can get something that looks not bad.

  subgraph cluster_0 {
    style=invis;
    pelican_build_base -> pelican_build;
  }

  subgraph cluster_1_1 {
    style=invis;
    pelican_software_base -> xrootd_software_init -> xrootd_software_base -> origin_software_base;
  }

  subgraph cluster_1_2 {
    style=invis;
    node [color=dimgray, fontcolor=dimgray];
    edge [color=dimgray, fontcolor=dimgray];

    xrootd_software_init -> xrootd_build;
    xrootd_build -> xrootd_software_base [style=dashed, label="via mount"];
  }

  subgraph cluster_2 {
    style=invis;
    node [color=green, fontcolor=green];
    edge [color=green, fontcolor=green];

    origin_software_base -> pelican_test -> pelican_dev;
  }

  subgraph cluster_3 {
    style=invis;
    node [color=mediumblue, fontcolor=mediumblue];
    edge [color=mediumblue, fontcolor=mediumblue];

    pelican_build -> origin [style=dashed, label="via COPY"];
    origin_software_base -> origin -> osdf_origin;

    pelican_build -> cache [style=dashed, label="via COPY"];
    xrootd_software_base -> cache -> osdf_cache;
  }

  subgraph cluster_4_1 {
    style=invis;
    pelican_build -> central_services_base [style=dashed, label="via COPY"];
    pelican_software_base -> central_services_base;
  }

  subgraph cluster_4_2 {
    style=invis;
    node [color=crimson, fontcolor=crimson];
    edge [color=crimson, fontcolor=crimson];

    central_services_base -> registry -> osdf_registry;
    central_services_base -> director -> osdf_director;
  }
}
